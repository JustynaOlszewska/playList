{"version":3,"sources":["components/organism/authors/UpdateAuthors.js","api/apiAuthors.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","hook/authors/useFormAuthors.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/react-query/es/core/mutationObserver.js","../node_modules/react-query/es/react/useMutation.js"],"names":["FormAuthors","lazy","UpdateAuthors","id","useParams","useQuery","getAuthor","data","error","isLoading","isError","useFormAuthors","updateAuthor","isMutating","onFormSubmit","type","defaultValue","message","authorActions","url","method","a","fetch","headers","body","JSON","stringify","res","json","Error","getAllAuthors","process","removeAuthor","addAuthor","queryKey","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","useMutation","mutateAsync","history","useHistory","push","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","MutationObserver","_Subscribable","client","options","_this","call","this","setOptions","bindMethods","updateResult","_inheritsLoose","_proto","prototype","mutate","bind","reset","defaultMutationOptions","onUnsubscribe","_this$currentMutation","listeners","currentMutation","removeObserver","onMutationUpdate","action","notifyOptions","onSuccess","onError","notify","getCurrentResult","currentResult","undefined","variables","mutateOptions","getMutationCache","build","_extends","addObserver","execute","state","getDefaultState","status","isSuccess","isIdle","_this2","notifyManager","batch","context","onSettled","listener","Subscribable","arg1","arg2","arg3","mountedRef","React","useRef","forceUpdate","useState","parseMutationArgs","queryClient","useQueryClient","obsRef","current","useEffect","unsubscribe","subscribe","batchCalls","x","useCallback","catch","noop","useErrorBoundary"],"mappings":"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","file":"static/js/7.55feaf6e.chunk.js","sourcesContent":["import React, { lazy } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useQuery } from \"react-query\";\nimport Spinner from \"../../molecules/spinner/Spinner\";\nimport { getAuthor, updateAuthor } from \"../../../api/apiAuthors\";\nimport { useFormAuthors } from \"../../../hook/authors/useFormAuthors\";\nconst FormAuthors = lazy(() => import(\"./FormAuthors.js\"));\n\nconst UpdateAuthors = () => {\n\n  const { id } = useParams();\n\n  const { data, error, isLoading, isError } = useQuery(\n    [\"author\", { id }],\n    getAuthor\n  );\n\n  const { isLoading: isMutating, onFormSubmit} = useFormAuthors(updateAuthor, id)\n\n  return (\n    <div>\n      {isLoading ? (\n        <Spinner />\n      ) : (\n        <FormAuthors\n          type=\"update\"\n          defaultValue={data}\n          onFormSubmit={onFormSubmit}\n          isLoading={isMutating}\n        />\n      )}\n      {isError && <span>Error: {error.message}</span>}\n    </div>\n  );\n};\n\nexport default UpdateAuthors;\n","const authorActions = async (url, method, data) => {\n  try {\n    const res = await fetch(url,\n      {\n        method: method,\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(data),\n      },\n    );\n    return method === \"DELETE\" ? true : res.json();\n  } catch (error) {\n    throw new Error(`somthing went wrong: ${error}`);\n  }\n};\n\nexport const getAllAuthors = () => {\n  return authorActions(`${process.env.REACT_APP_API_SERVER}/justyna-olszewska-authors`, \"GET\")\n};\n\nexport const removeAuthor = (id) => {\n  return authorActions(`${process.env.REACT_APP_API_SERVER}/justyna-olszewska-authors/${id}`, \"DELETE\")\n};\n\nexport const addAuthor = (data) => {\n  return authorActions(`${process.env.REACT_APP_API_SERVER}/justyna-olszewska-authors`, \"POST\", data)\n};\n\nexport const updateAuthor = ({ id, ...data }) => {\n  return authorActions(`${process.env.REACT_APP_API_SERVER}/justyna-olszewska-authors/${id}`, \"PUT\", data)\n};\n\nexport const getAuthor = ({ queryKey }) => {\n  /*eslint-disable no-unused-vars*/\n  const [_key, { id }] = queryKey;\n  return authorActions(`${process.env.REACT_APP_API_SERVER}/justyna-olszewska-authors/${id}`, \"GET\")\n};\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import { useMutation } from \"react-query\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport const useFormAuthors = (addAuthor, id = null) => {\r\n\r\n    const { mutateAsync, isLoading } = useMutation(addAuthor);\r\n\r\n    const history = useHistory();\r\n\r\n    const onFormSubmit = async (data) => {\r\n        await mutateAsync(id ? {...data, id} : data);\r\n        history.push(\"/authors\");\r\n    };\r\n\r\n    return (\r\n        { onFormSubmit, isLoading }\r\n    );\r\n}\r\n","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { getDefaultState } from './mutation';\nimport { notifyManager } from './notifyManager';\nimport { Subscribable } from './subscribable';\n// CLASS\nexport var MutationObserver = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(MutationObserver, _Subscribable);\n\n  function MutationObserver(client, options) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.client = client;\n\n    _this.setOptions(options);\n\n    _this.bindMethods();\n\n    _this.updateResult();\n\n    return _this;\n  }\n\n  var _proto = MutationObserver.prototype;\n\n  _proto.bindMethods = function bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  };\n\n  _proto.setOptions = function setOptions(options) {\n    this.options = this.client.defaultMutationOptions(options);\n  };\n\n  _proto.onUnsubscribe = function onUnsubscribe() {\n    if (!this.listeners.length) {\n      var _this$currentMutation;\n\n      (_this$currentMutation = this.currentMutation) == null ? void 0 : _this$currentMutation.removeObserver(this);\n    }\n  };\n\n  _proto.onMutationUpdate = function onMutationUpdate(action) {\n    this.updateResult(); // Determine which callbacks to trigger\n\n    var notifyOptions = {\n      listeners: true\n    };\n\n    if (action.type === 'success') {\n      notifyOptions.onSuccess = true;\n    } else if (action.type === 'error') {\n      notifyOptions.onError = true;\n    }\n\n    this.notify(notifyOptions);\n  };\n\n  _proto.getCurrentResult = function getCurrentResult() {\n    return this.currentResult;\n  };\n\n  _proto.reset = function reset() {\n    this.currentMutation = undefined;\n    this.updateResult();\n    this.notify({\n      listeners: true\n    });\n  };\n\n  _proto.mutate = function mutate(variables, options) {\n    this.mutateOptions = options;\n\n    if (this.currentMutation) {\n      this.currentMutation.removeObserver(this);\n    }\n\n    this.currentMutation = this.client.getMutationCache().build(this.client, _extends({}, this.options, {\n      variables: typeof variables !== 'undefined' ? variables : this.options.variables\n    }));\n    this.currentMutation.addObserver(this);\n    return this.currentMutation.execute();\n  };\n\n  _proto.updateResult = function updateResult() {\n    var state = this.currentMutation ? this.currentMutation.state : getDefaultState();\n    this.currentResult = _extends({}, state, {\n      isLoading: state.status === 'loading',\n      isSuccess: state.status === 'success',\n      isError: state.status === 'error',\n      isIdle: state.status === 'idle',\n      mutate: this.mutate,\n      reset: this.reset\n    });\n  };\n\n  _proto.notify = function notify(options) {\n    var _this2 = this;\n\n    notifyManager.batch(function () {\n      // First trigger the mutate callbacks\n      if (_this2.mutateOptions) {\n        if (options.onSuccess) {\n          _this2.mutateOptions.onSuccess == null ? void 0 : _this2.mutateOptions.onSuccess(_this2.currentResult.data, _this2.currentResult.variables, _this2.currentResult.context);\n          _this2.mutateOptions.onSettled == null ? void 0 : _this2.mutateOptions.onSettled(_this2.currentResult.data, null, _this2.currentResult.variables, _this2.currentResult.context);\n        } else if (options.onError) {\n          _this2.mutateOptions.onError == null ? void 0 : _this2.mutateOptions.onError(_this2.currentResult.error, _this2.currentResult.variables, _this2.currentResult.context);\n          _this2.mutateOptions.onSettled == null ? void 0 : _this2.mutateOptions.onSettled(undefined, _this2.currentResult.error, _this2.currentResult.variables, _this2.currentResult.context);\n        }\n      } // Then trigger the listeners\n\n\n      if (options.listeners) {\n        _this2.listeners.forEach(function (listener) {\n          listener(_this2.currentResult);\n        });\n      }\n    });\n  };\n\n  return MutationObserver;\n}(Subscribable);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport { notifyManager } from '../core/notifyManager';\nimport { noop, parseMutationArgs } from '../core/utils';\nimport { MutationObserver } from '../core/mutationObserver';\nimport { useQueryClient } from './QueryClientProvider';\nexport function useMutation(arg1, arg2, arg3) {\n  var mountedRef = React.useRef(false);\n\n  var _React$useState = React.useState(0),\n      forceUpdate = _React$useState[1];\n\n  var options = parseMutationArgs(arg1, arg2, arg3);\n  var queryClient = useQueryClient();\n  var obsRef = React.useRef();\n\n  if (!obsRef.current) {\n    obsRef.current = new MutationObserver(queryClient, options);\n  } else {\n    obsRef.current.setOptions(options);\n  }\n\n  var currentResult = obsRef.current.getCurrentResult();\n  React.useEffect(function () {\n    mountedRef.current = true;\n    var unsubscribe = obsRef.current.subscribe(notifyManager.batchCalls(function () {\n      if (mountedRef.current) {\n        forceUpdate(function (x) {\n          return x + 1;\n        });\n      }\n    }));\n    return function () {\n      mountedRef.current = false;\n      unsubscribe();\n    };\n  }, []);\n  var mutate = React.useCallback(function (variables, mutateOptions) {\n    obsRef.current.mutate(variables, mutateOptions).catch(noop);\n  }, []);\n\n  if (currentResult.error && obsRef.current.options.useErrorBoundary) {\n    throw currentResult.error;\n  }\n\n  return _extends({}, currentResult, {\n    mutate: mutate,\n    mutateAsync: currentResult.mutate\n  });\n}"],"sourceRoot":""}